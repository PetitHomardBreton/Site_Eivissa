<%- include('head') -%>
<%- include('header') -%>

<section class="visuelsOfRealisation">

    <div class="visuelContent">
        <div class="visuels">
            <ul class="visuelsList">
                <% for(let i=0; i<visuels.length; i++) { %>
                <li>
                
                <% if (visuels[i].typeVisuel === "video") { %>

                    <video id="video" controls loop autoplay muted playsinline></video>
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            var video = document.getElementById('video');
                            var source = document.createElement('source');
                        
                            if (window.innerWidth <= 767) {
                                source.setAttribute('src', '/img/' + '<%= visuels[i].visuelWidth767 %>');
                            } else {
                                source.setAttribute('src', '/img/' + '<%= visuels[i].visuelWidth1920 %>');
                            }
                        
                            source.setAttribute('type', 'video/mp4');
                            video.appendChild(source);
                            video.load();
                        });
                        </script>




                <% } else { %>
                    <picture>
                        <source media="(max-width: 767px)" srcset="/img/<%= visuels[i].visuelWidth767 %>">
                        <source media="(min-width: 768px)" srcset="/img/<%= visuels[i].visuelWidth1920 %>">
                        <img src="/img/<%= visuels[i].visuelWidth767 %>" alt="image nomm√©e <%= visuels[i].nameVisuel %> , illustration du projet <%= visuels[i].nomRealisation %>. description : <%= visuels[i].commentaireVisuel %>">
                    </picture>
                <% } %>


                </li>
                <% } %>
            </ul>
        </div>
    </div>
</section>

<%- include('footer') -%>
